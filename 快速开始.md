# 快速开始指南

## 第一次使用

### 1. 启动应用

**macOS/Linux:**
```bash
./start.sh
```

**Windows:**
双击 `start.bat`

### 2. 配置基本参数

应用启动后，你会看到一个图形界面：

1. **点击"浏览..."按钮** → 选择"西沟乡麻地沟村（资料扫描）"文件夹
2. **选择"村（二级目录）"** （因为测试目录是二级结构）
3. **OSS基础URL保持默认** 或修改为你的实际URL
4. **其他参数使用默认值即可**

### 3. 开始生成

点击 **"开始生成"** 按钮，程序会：
- 扫描所有子目录
- 为每个目录生成二维码
- 创建包含二维码的PDF
- 在日志窗口显示进度

### 4. 查看结果

处理完成后，打开任意一个子目录（例如"何皂皂"），你会看到：
- `何皂皂_qr.png` - 二维码图片
- `何皂皂_qr.pdf` - 包含二维码的PDF文件

## 界面说明

```
┌─────────────────────────────────────────────┐
│  文档处理工具 - 二维码与PDF生成器              │
├─────────────────────────────────────────────┤
│ 【目录设置】                                  │
│  根目录: [_______________] [浏览...]          │
│  目录结构: ○村（二级目录） ○乡（三级目录）      │
├─────────────────────────────────────────────┤
│ 【OSS设置】                                   │
│  OSS基础URL: [________________________]      │
├─────────────────────────────────────────────┤
│ 【PDF设置】                                   │
│  页面尺寸: [A4 ▼]                            │
│  （选择"自定义"会出现宽度和高度输入框）         │
├─────────────────────────────────────────────┤
│ 【二维码设置】                                │
│  二维码大小(mm): [50]                        │
│  X坐标(mm): [10]  Y坐标(mm): [10]           │
│  注：坐标为二维码左上角位置...                 │
├─────────────────────────────────────────────┤
│        [开始生成]    [清除日志]               │
├─────────────────────────────────────────────┤
│ 【进度】                                     │
│  就绪                                        │
│  [====================]                     │
├─────────────────────────────────────────────┤
│ 【处理日志】                                  │
│  已选择目录: /path/to/directory              │
│  找到 27 个目标目录                           │
│  处理目录: 何皂皂                             │
│  ✓ 二维码已生成: 何皂皂_qr.png                │
│  ✓ PDF已生成: 何皂皂_qr.pdf                   │
│  ...                                        │
└─────────────────────────────────────────────┘
```

## 常用配置示例

### 示例1：标准A4纸，二维码在左下角
```
页面尺寸: A4
二维码大小: 50mm
X坐标: 10mm
Y坐标: 10mm
```

### 示例2：A4纸，二维码在右上角
```
页面尺寸: A4
二维码大小: 50mm
X坐标: 150mm  (210-50-10)
Y坐标: 237mm  (297-50-10)
```

### 示例3：小卡片，二维码居中
```
页面尺寸: 自定义
宽度: 90mm
高度: 55mm
二维码大小: 30mm
X坐标: 30mm   ((90-30)/2)
Y坐标: 12.5mm ((55-30)/2)
```

## 测试功能

在使用真实数据前，可以先运行测试：

```bash
source .venv/bin/activate  # 激活虚拟环境
python test.py             # 运行测试
```

测试会：
1. 生成测试二维码
2. 创建测试PDF
3. 扫描测试目录
4. 输出结果到 `test_output/` 目录

## 注意事项

⚠️ **第一次使用请注意：**

1. 先用测试目录试运行，确认效果
2. 检查生成的PDF，确认二维码位置和大小
3. 用手机扫描二维码测试（如果已上传到OSS）
4. 确认无误后再处理大批量数据

⚠️ **关于OSS URL：**

- 二维码中的URL格式：`OSS基础URL + 目录名`
- 例如：`https://my-bucket.oss-cn-beijing.aliyuncs.com/xigou/何皂皂`
- 请确保URL正确，否则扫码后无法访问

⚠️ **关于坐标系统：**

- 坐标原点在**页面左下角**（不是左上角！）
- Y轴向上为正
- 单位是毫米（mm）

## 如果遇到问题

1. **程序无法启动**
   - 检查虚拟环境是否正确创建
   - 运行：`pip install -r requirements.txt`

2. **没有生成文件**
   - 查看日志窗口的错误信息
   - 确认目录中有图片文件
   - 检查文件写入权限

3. **二维码位置不对**
   - 记住坐标原点在左下角
   - 参考"常用配置示例"调整参数

4. **需要更多帮助**
   - 查看 `README.md`
   - 查看 `操作指南.md`
   - 查看 `项目结构.md`

## 下一步

使用本工具生成二维码和PDF后：

1. **上传到OSS**
   - 将图片文件上传到阿里云OSS
   - 确保目录结构与本地一致
   - 确保文件可以公开访问

2. **测试二维码**
   - 用手机扫描生成的二维码
   - 验证能否正确访问图片

3. **分发PDF**
   - 打印或分发包含二维码的PDF
   - 确保打印质量足够清晰

祝使用愉快！🎉
