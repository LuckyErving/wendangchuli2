# 项目结构

```
wendangchuli2/
├── .venv/                          # Python虚拟环境
├── .gitignore                      # Git忽略文件配置
├── README.md                       # 项目说明文档
├── 操作指南.md                      # 详细操作指南
├── requirements.txt                # Python依赖包列表
├── start.sh                        # 快速启动脚本（macOS/Linux）
├── main.py                         # 主应用程序
├── test.py                         # 测试脚本
├── test_output/                    # 测试输出目录（自动生成）
│   ├── test_qr.png                # 测试二维码
│   └── test_qr.pdf                # 测试PDF
└── 西沟乡麻地沟村（资料扫描）/        # 测试数据目录
    ├── 何皂皂/
    ├── 刘彩统/
    ├── 刘来有/
    └── ...
```

## 文件说明

### 核心文件

- **main.py**: 主应用程序
  - 包含GUI界面
  - 实现二维码生成
  - 实现PDF生成
  - 实现目录扫描和批处理

- **requirements.txt**: 依赖包列表
  - qrcode[pil]: 二维码生成库
  - reportlab: PDF生成库
  - Pillow: 图像处理库

### 脚本文件

- **start.sh**: 快速启动脚本
  - 自动激活虚拟环境
  - 启动应用程序

- **test.py**: 测试脚本
  - 测试二维码生成功能
  - 测试PDF生成功能
  - 测试目录扫描功能

### 文档文件

- **README.md**: 项目概述和基本使用说明
- **操作指南.md**: 详细的操作步骤和场景示例
- **项目结构.md**: 本文件，说明项目结构

### 配置文件

- **.gitignore**: Git版本控制忽略规则
  - 排除虚拟环境
  - 排除生成的二维码和PDF
  - 排除临时文件

## 主要功能模块

### 1. GUI界面 (main.py)
- `DocumentProcessorApp`: 主应用类
- `create_widgets()`: 创建界面组件
- 提供用户友好的参数配置界面

### 2. 目录处理
- `get_target_directories()`: 扫描目标目录
- `get_images_in_directory()`: 获取目录中的图片
- 支持二级和三级目录结构

### 3. 二维码生成
- `generate_qrcode()`: 生成二维码图片
- 使用qrcode库
- 支持自定义大小
- 高质量输出（300 DPI）

### 4. PDF生成
- `create_pdf_with_qrcode()`: 创建包含二维码的PDF
- 使用ReportLab库
- 支持多种页面尺寸（A3/A4/A5/自定义）
- 支持自定义二维码位置

### 5. 批量处理
- `process_directory()`: 处理单个目录
- `process_all_directories()`: 批量处理所有目录
- 多线程处理，不阻塞界面
- 实时日志反馈

## 数据流程

```
1. 用户输入
   ├── 选择根目录
   ├── 配置OSS URL
   ├── 设置PDF参数
   └── 设置二维码参数
   
2. 扫描目录
   └── 根据目录类型（村/乡）获取目标目录列表
   
3. 处理每个目录
   ├── 检查是否有图片
   ├── 构建OSS URL
   ├── 生成二维码图片
   └── 创建PDF文档
   
4. 输出结果
   ├── 目录名_qr.png
   └── 目录名_qr.pdf
```

## 技术栈

- **语言**: Python 3.9+
- **GUI框架**: Tkinter (内置)
- **二维码生成**: python-qrcode
- **图像处理**: Pillow (PIL)
- **PDF生成**: ReportLab
- **并发处理**: threading (内置)

## 开发环境

- macOS / Linux / Windows
- Python 3.7+
- 虚拟环境 (venv)

## 扩展性

如需添加新功能，可以考虑：

1. **图片预览**: 在GUI中预览生成的二维码和PDF
2. **批量上传**: 集成OSS SDK，自动上传文件
3. **模板系统**: 支持多种PDF模板
4. **进度显示**: 显示详细的处理进度百分比
5. **错误重试**: 对失败的目录自动重试
6. **配置保存**: 保存用户的配置参数
7. **导出报告**: 生成处理报告（成功/失败统计）

## 维护建议

1. **定期更新依赖**: `pip install --upgrade -r requirements.txt`
2. **测试新功能**: 修改代码后运行 `test.py`
3. **备份数据**: 处理前备份原始文件
4. **版本控制**: 使用git管理代码版本
